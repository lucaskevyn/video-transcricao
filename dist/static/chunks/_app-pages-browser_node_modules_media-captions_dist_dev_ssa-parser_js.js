"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_media-captions_dist_dev_ssa-parser_js"],{

/***/ "(app-pages-browser)/./node_modules/media-captions/dist/dev/ssa-parser.js":
/*!************************************************************!*\
  !*** ./node_modules/media-captions/dist/dev/ssa-parser.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SSAParser: function() { return /* binding */ SSAParser; },\n/* harmony export */   \"default\": function() { return /* binding */ createSSAParser; }\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.js */ \"(app-pages-browser)/./node_modules/media-captions/dist/dev/index.js\");\n\n\nconst FORMAT_START_RE = /^Format:[\\s\\t]*/, STYLE_START_RE = /^Style:[\\s\\t]*/, DIALOGUE_START_RE = /^Dialogue:[\\s\\t]*/, FORMAT_SPLIT_RE = /[\\s\\t]*,[\\s\\t]*/, STYLE_FUNCTION_RE = /\\{[^}]+\\}/g, NEW_LINE_RE = /\\\\N/g, STYLES_SECTION_START_RE = /^\\[(.*)[\\s\\t]?Styles\\]$/, EVENTS_SECTION_START_RE = /^\\[(.*)[\\s\\t]?Events\\]$/;\nclass SSAParser {\n  _init;\n  _section = 0 /* None */;\n  _cue = null;\n  _cues = [];\n  _errors = [];\n  _format = null;\n  _errorBuilder;\n  _styles = {};\n  async init(init) {\n    this._init = init;\n    if (init.errors)\n      this._errorBuilder = (await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_media-captions_dist_dev_errors_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./errors.js */ \"(app-pages-browser)/./node_modules/media-captions/dist/dev/errors.js\"))).ParseErrorBuilder;\n  }\n  parse(line, lineCount) {\n    if (this._section) {\n      switch (this._section) {\n        case 1 /* Style */:\n          if (line === \"\") {\n            this._section = 0 /* None */;\n          } else if (STYLE_START_RE.test(line)) {\n            if (this._format) {\n              const styles = line.replace(STYLE_START_RE, \"\").split(FORMAT_SPLIT_RE);\n              this._parseStyles(styles);\n            } else {\n              this._handleError(this._errorBuilder?._missingFormat(\"Style\", lineCount));\n            }\n          } else if (FORMAT_START_RE.test(line)) {\n            this._format = line.replace(FORMAT_START_RE, \"\").split(FORMAT_SPLIT_RE);\n          } else if (EVENTS_SECTION_START_RE.test(line)) {\n            this._format = null;\n            this._section = 2 /* Event */;\n          }\n          break;\n        case 2 /* Event */:\n          if (line === \"\") {\n            this._commitCue();\n          } else if (DIALOGUE_START_RE.test(line)) {\n            this._commitCue();\n            if (this._format) {\n              const dialogue = line.replace(DIALOGUE_START_RE, \"\").split(FORMAT_SPLIT_RE), cue = this._parseDialogue(dialogue, lineCount);\n              if (cue)\n                this._cue = cue;\n            } else {\n              this._handleError(this._errorBuilder?._missingFormat(\"Dialogue\", lineCount));\n            }\n          } else if (this._cue) {\n            this._cue.text += \"\\n\" + line.replace(STYLE_FUNCTION_RE, \"\").replace(NEW_LINE_RE, \"\\n\");\n          } else if (FORMAT_START_RE.test(line)) {\n            this._format = line.replace(FORMAT_START_RE, \"\").split(FORMAT_SPLIT_RE);\n          } else if (STYLES_SECTION_START_RE.test(line)) {\n            this._format = null;\n            this._section = 1 /* Style */;\n          } else if (EVENTS_SECTION_START_RE.test(line)) {\n            this._format = null;\n          }\n      }\n    } else if (line === \"\") ; else if (STYLES_SECTION_START_RE.test(line)) {\n      this._format = null;\n      this._section = 1 /* Style */;\n    } else if (EVENTS_SECTION_START_RE.test(line)) {\n      this._format = null;\n      this._section = 2 /* Event */;\n    }\n  }\n  done() {\n    return {\n      metadata: {},\n      cues: this._cues,\n      regions: [],\n      errors: this._errors\n    };\n  }\n  _commitCue() {\n    if (!this._cue)\n      return;\n    this._cues.push(this._cue);\n    this._init.onCue?.(this._cue);\n    this._cue = null;\n  }\n  _parseStyles(values) {\n    let name = \"Default\", styles = {}, outlineX, align = \"center\", vertical = \"bottom\", marginV, outlineY = 1.2, outlineColor, bgColor, borderStyle = 3, transform = [];\n    for (let i = 0; i < this._format.length; i++) {\n      const field = this._format[i], value = values[i];\n      switch (field) {\n        case \"Name\":\n          name = value;\n          break;\n        case \"Fontname\":\n          styles[\"font-family\"] = value;\n          break;\n        case \"Fontsize\":\n          styles[\"font-size\"] = `calc(${value} / var(--overlay-height))`;\n          break;\n        case \"PrimaryColour\":\n          const color = parseColor(value);\n          if (color)\n            styles[\"--cue-color\"] = color;\n          break;\n        case \"BorderStyle\":\n          borderStyle = parseInt(value, 10);\n          break;\n        case \"BackColour\":\n          bgColor = parseColor(value);\n          break;\n        case \"OutlineColour\":\n          const _outlineColor = parseColor(value);\n          if (_outlineColor)\n            outlineColor = _outlineColor;\n          break;\n        case \"Bold\":\n          if (parseInt(value))\n            styles[\"font-weight\"] = \"bold\";\n          break;\n        case \"Italic\":\n          if (parseInt(value))\n            styles[\"font-style\"] = \"italic\";\n          break;\n        case \"Underline\":\n          if (parseInt(value))\n            styles[\"text-decoration\"] = \"underline\";\n          break;\n        case \"StrikeOut\":\n          if (parseInt(value))\n            styles[\"text-decoration\"] = \"line-through\";\n          break;\n        case \"Spacing\":\n          styles[\"letter-spacing\"] = value + \"px\";\n          break;\n        case \"AlphaLevel\":\n          styles[\"opacity\"] = parseFloat(value);\n          break;\n        case \"ScaleX\":\n          transform.push(`scaleX(${parseFloat(value) / 100})`);\n          break;\n        case \"ScaleY\":\n          transform.push(`scaleY(${parseFloat(value) / 100})`);\n          break;\n        case \"Angle\":\n          transform.push(`rotate(${value}deg)`);\n          break;\n        case \"Shadow\":\n          outlineY = parseInt(value, 10) * 1.2;\n          break;\n        case \"MarginL\":\n          styles[\"--cue-width\"] = \"auto\";\n          styles[\"--cue-left\"] = parseFloat(value) + \"px\";\n          break;\n        case \"MarginR\":\n          styles[\"--cue-width\"] = \"auto\";\n          styles[\"--cue-right\"] = parseFloat(value) + \"px\";\n          break;\n        case \"MarginV\":\n          marginV = parseFloat(value);\n          break;\n        case \"Outline\":\n          outlineX = parseInt(value, 10);\n          break;\n        case \"Alignment\":\n          const alignment = parseInt(value, 10);\n          if (alignment >= 4)\n            vertical = alignment >= 7 ? \"top\" : \"center\";\n          switch (alignment % 3) {\n            case 1:\n              align = \"start\";\n              break;\n            case 2:\n              align = \"center\";\n              break;\n            case 3:\n              align = \"end\";\n              break;\n          }\n      }\n    }\n    styles._vertical = vertical;\n    styles[\"--cue-white-space\"] = \"normal\";\n    styles[\"--cue-line-height\"] = \"normal\";\n    styles[\"--cue-text-align\"] = align;\n    if (vertical === \"center\") {\n      styles[`--cue-top`] = \"50%\";\n      transform.push(\"translateY(-50%)\");\n    } else {\n      styles[`--cue-${vertical}`] = (marginV || 0) + \"px\";\n    }\n    if (borderStyle === 1) {\n      styles[\"--cue-padding-y\"] = \"0\";\n    }\n    if (borderStyle === 1 || bgColor) {\n      styles[\"--cue-bg-color\"] = borderStyle === 1 ? \"none\" : bgColor;\n    }\n    if (borderStyle === 3 && outlineColor) {\n      styles[\"--cue-outline\"] = `${outlineX}px solid ${outlineColor}`;\n    }\n    if (borderStyle === 1 && typeof outlineX === \"number\") {\n      const color = bgColor ?? \"#000\";\n      styles[\"--cue-text-shadow\"] = [\n        outlineColor && buildTextShadow(outlineX * 1.2, outlineY * 1.2, outlineColor),\n        outlineColor ? buildTextShadow(outlineX * (outlineX / 2), outlineY * (outlineX / 2), color) : buildTextShadow(outlineX, outlineY, color)\n      ].filter(Boolean).join(\", \");\n    }\n    if (transform.length)\n      styles[\"--cue-transform\"] = transform.join(\" \");\n    this._styles[name] = styles;\n  }\n  _parseDialogue(values, lineCount) {\n    const fields = this._buildFields(values);\n    const timestamp = this._parseTimestamp(fields.Start, fields.End, lineCount);\n    if (!timestamp)\n      return;\n    const cue = new _index_js__WEBPACK_IMPORTED_MODULE_0__.b(timestamp[0], timestamp[1], \"\"), styles = { ...this._styles[fields.Style] || {} }, voice = fields.Name ? `<v ${fields.Name}>` : \"\";\n    const vertical = styles._vertical, marginLeft = fields.MarginL && parseFloat(fields.MarginL), marginRight = fields.MarginR && parseFloat(fields.MarginR), marginV = fields.MarginV && parseFloat(fields.MarginV);\n    if (marginLeft) {\n      styles[\"--cue-width\"] = \"auto\";\n      styles[\"--cue-left\"] = marginLeft + \"px\";\n    }\n    if (marginRight) {\n      styles[\"--cue-width\"] = \"auto\";\n      styles[\"--cue-right\"] = marginRight + \"px\";\n    }\n    if (marginV && vertical !== \"center\") {\n      styles[`--cue-${vertical}`] = marginV + \"px\";\n    }\n    cue.text = voice + values.slice(this._format.length - 1).join(\", \").replace(STYLE_FUNCTION_RE, \"\").replace(NEW_LINE_RE, \"\\n\");\n    delete styles._vertical;\n    if (Object.keys(styles).length)\n      cue.style = styles;\n    return cue;\n  }\n  _buildFields(values) {\n    const fields = {};\n    for (let i = 0; i < this._format.length; i++) {\n      fields[this._format[i]] = values[i];\n    }\n    return fields;\n  }\n  _parseTimestamp(startTimeText, endTimeText, lineCount) {\n    const startTime = (0,_index_js__WEBPACK_IMPORTED_MODULE_0__.p)(startTimeText), endTime = (0,_index_js__WEBPACK_IMPORTED_MODULE_0__.p)(endTimeText);\n    if (startTime !== null && endTime !== null && endTime > startTime) {\n      return [startTime, endTime];\n    } else {\n      if (startTime === null) {\n        this._handleError(this._errorBuilder?._badStartTimestamp(startTimeText, lineCount));\n      }\n      if (endTime === null) {\n        this._handleError(this._errorBuilder?._badEndTimestamp(endTimeText, lineCount));\n      }\n      if (startTime != null && endTime !== null && endTime > startTime) {\n        this._handleError(this._errorBuilder?._badRangeTimestamp(startTime, endTime, lineCount));\n      }\n    }\n  }\n  _handleError(error) {\n    if (!error)\n      return;\n    this._errors.push(error);\n    if (this._init.strict) {\n      this._init.cancel();\n      throw error;\n    } else {\n      this._init.onError?.(error);\n    }\n  }\n}\nfunction parseColor(color) {\n  const abgr = parseInt(color.replace(\"&H\", \"\"), 16);\n  if (abgr >= 0) {\n    const a = abgr >> 24 & 255 ^ 255;\n    const alpha = a / 255;\n    const b = abgr >> 16 & 255;\n    const g = abgr >> 8 & 255;\n    const r = abgr & 255;\n    return \"rgba(\" + [r, g, b, alpha].join(\",\") + \")\";\n  }\n  return null;\n}\nfunction buildTextShadow(x, y, color) {\n  const noOfShadows = Math.ceil(2 * Math.PI * x);\n  let textShadow = \"\";\n  for (let i = 0; i < noOfShadows; i++) {\n    const theta = 2 * Math.PI * i / noOfShadows;\n    textShadow += x * Math.cos(theta) + \"px \" + y * Math.sin(theta) + \"px 0 \" + color + (i == noOfShadows - 1 ? \"\" : \",\");\n  }\n  return textShadow;\n}\nfunction createSSAParser() {\n  return new SSAParser();\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYS1jYXB0aW9ucy9kaXN0L2Rldi9zc2EtcGFyc2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpRTs7QUFFakUsbUxBQW1MLEdBQUcsSUFBSTtBQUMxTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MseVBBQXFCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLE1BQU0sd0JBQXdCO0FBQzlCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLG9CQUFvQix5QkFBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLE9BQU87QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsd0JBQXdCO0FBQzNEO0FBQ0E7QUFDQSxtQ0FBbUMsd0JBQXdCO0FBQzNEO0FBQ0E7QUFDQSxtQ0FBbUMsTUFBTTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sc0JBQXNCLFNBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxTQUFTLFdBQVcsYUFBYTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdDQUFNLDZDQUE2QyxxQ0FBcUMsOEJBQThCLFlBQVk7QUFDdEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsU0FBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IseUJBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNENBQWlCLDJCQUEyQiw0Q0FBaUI7QUFDbkY7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUJBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWlEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYS1jYXB0aW9ucy9kaXN0L2Rldi9zc2EtcGFyc2VyLmpzPzg1NmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYiBhcyBWVFRDdWUsIHAgYXMgcGFyc2VWVFRUaW1lc3RhbXAgfSBmcm9tICcuL2luZGV4LmpzJztcblxuY29uc3QgRk9STUFUX1NUQVJUX1JFID0gL15Gb3JtYXQ6W1xcc1xcdF0qLywgU1RZTEVfU1RBUlRfUkUgPSAvXlN0eWxlOltcXHNcXHRdKi8sIERJQUxPR1VFX1NUQVJUX1JFID0gL15EaWFsb2d1ZTpbXFxzXFx0XSovLCBGT1JNQVRfU1BMSVRfUkUgPSAvW1xcc1xcdF0qLFtcXHNcXHRdKi8sIFNUWUxFX0ZVTkNUSU9OX1JFID0gL1xce1tefV0rXFx9L2csIE5FV19MSU5FX1JFID0gL1xcXFxOL2csIFNUWUxFU19TRUNUSU9OX1NUQVJUX1JFID0gL15cXFsoLiopW1xcc1xcdF0/U3R5bGVzXFxdJC8sIEVWRU5UU19TRUNUSU9OX1NUQVJUX1JFID0gL15cXFsoLiopW1xcc1xcdF0/RXZlbnRzXFxdJC87XG5jbGFzcyBTU0FQYXJzZXIge1xuICBfaW5pdDtcbiAgX3NlY3Rpb24gPSAwIC8qIE5vbmUgKi87XG4gIF9jdWUgPSBudWxsO1xuICBfY3VlcyA9IFtdO1xuICBfZXJyb3JzID0gW107XG4gIF9mb3JtYXQgPSBudWxsO1xuICBfZXJyb3JCdWlsZGVyO1xuICBfc3R5bGVzID0ge307XG4gIGFzeW5jIGluaXQoaW5pdCkge1xuICAgIHRoaXMuX2luaXQgPSBpbml0O1xuICAgIGlmIChpbml0LmVycm9ycylcbiAgICAgIHRoaXMuX2Vycm9yQnVpbGRlciA9IChhd2FpdCBpbXBvcnQoJy4vZXJyb3JzLmpzJykpLlBhcnNlRXJyb3JCdWlsZGVyO1xuICB9XG4gIHBhcnNlKGxpbmUsIGxpbmVDb3VudCkge1xuICAgIGlmICh0aGlzLl9zZWN0aW9uKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuX3NlY3Rpb24pIHtcbiAgICAgICAgY2FzZSAxIC8qIFN0eWxlICovOlxuICAgICAgICAgIGlmIChsaW5lID09PSBcIlwiKSB7XG4gICAgICAgICAgICB0aGlzLl9zZWN0aW9uID0gMCAvKiBOb25lICovO1xuICAgICAgICAgIH0gZWxzZSBpZiAoU1RZTEVfU1RBUlRfUkUudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Zvcm1hdCkge1xuICAgICAgICAgICAgICBjb25zdCBzdHlsZXMgPSBsaW5lLnJlcGxhY2UoU1RZTEVfU1RBUlRfUkUsIFwiXCIpLnNwbGl0KEZPUk1BVF9TUExJVF9SRSk7XG4gICAgICAgICAgICAgIHRoaXMuX3BhcnNlU3R5bGVzKHN0eWxlcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVFcnJvcih0aGlzLl9lcnJvckJ1aWxkZXI/Ll9taXNzaW5nRm9ybWF0KFwiU3R5bGVcIiwgbGluZUNvdW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChGT1JNQVRfU1RBUlRfUkUudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgdGhpcy5fZm9ybWF0ID0gbGluZS5yZXBsYWNlKEZPUk1BVF9TVEFSVF9SRSwgXCJcIikuc3BsaXQoRk9STUFUX1NQTElUX1JFKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEVWRU5UU19TRUNUSU9OX1NUQVJUX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1hdCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9zZWN0aW9uID0gMiAvKiBFdmVudCAqLztcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMiAvKiBFdmVudCAqLzpcbiAgICAgICAgICBpZiAobGluZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgdGhpcy5fY29tbWl0Q3VlKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChESUFMT0dVRV9TVEFSVF9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICB0aGlzLl9jb21taXRDdWUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9mb3JtYXQpIHtcbiAgICAgICAgICAgICAgY29uc3QgZGlhbG9ndWUgPSBsaW5lLnJlcGxhY2UoRElBTE9HVUVfU1RBUlRfUkUsIFwiXCIpLnNwbGl0KEZPUk1BVF9TUExJVF9SRSksIGN1ZSA9IHRoaXMuX3BhcnNlRGlhbG9ndWUoZGlhbG9ndWUsIGxpbmVDb3VudCk7XG4gICAgICAgICAgICAgIGlmIChjdWUpXG4gICAgICAgICAgICAgICAgdGhpcy5fY3VlID0gY3VlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5faGFuZGxlRXJyb3IodGhpcy5fZXJyb3JCdWlsZGVyPy5fbWlzc2luZ0Zvcm1hdChcIkRpYWxvZ3VlXCIsIGxpbmVDb3VudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fY3VlKSB7XG4gICAgICAgICAgICB0aGlzLl9jdWUudGV4dCArPSBcIlxcblwiICsgbGluZS5yZXBsYWNlKFNUWUxFX0ZVTkNUSU9OX1JFLCBcIlwiKS5yZXBsYWNlKE5FV19MSU5FX1JFLCBcIlxcblwiKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEZPUk1BVF9TVEFSVF9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtYXQgPSBsaW5lLnJlcGxhY2UoRk9STUFUX1NUQVJUX1JFLCBcIlwiKS5zcGxpdChGT1JNQVRfU1BMSVRfUkUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoU1RZTEVTX1NFQ1RJT05fU1RBUlRfUkUudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgdGhpcy5fZm9ybWF0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3NlY3Rpb24gPSAxIC8qIFN0eWxlICovO1xuICAgICAgICAgIH0gZWxzZSBpZiAoRVZFTlRTX1NFQ1RJT05fU1RBUlRfUkUudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgdGhpcy5fZm9ybWF0ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChsaW5lID09PSBcIlwiKSA7IGVsc2UgaWYgKFNUWUxFU19TRUNUSU9OX1NUQVJUX1JFLnRlc3QobGluZSkpIHtcbiAgICAgIHRoaXMuX2Zvcm1hdCA9IG51bGw7XG4gICAgICB0aGlzLl9zZWN0aW9uID0gMSAvKiBTdHlsZSAqLztcbiAgICB9IGVsc2UgaWYgKEVWRU5UU19TRUNUSU9OX1NUQVJUX1JFLnRlc3QobGluZSkpIHtcbiAgICAgIHRoaXMuX2Zvcm1hdCA9IG51bGw7XG4gICAgICB0aGlzLl9zZWN0aW9uID0gMiAvKiBFdmVudCAqLztcbiAgICB9XG4gIH1cbiAgZG9uZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWV0YWRhdGE6IHt9LFxuICAgICAgY3VlczogdGhpcy5fY3VlcyxcbiAgICAgIHJlZ2lvbnM6IFtdLFxuICAgICAgZXJyb3JzOiB0aGlzLl9lcnJvcnNcbiAgICB9O1xuICB9XG4gIF9jb21taXRDdWUoKSB7XG4gICAgaWYgKCF0aGlzLl9jdWUpXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5fY3Vlcy5wdXNoKHRoaXMuX2N1ZSk7XG4gICAgdGhpcy5faW5pdC5vbkN1ZT8uKHRoaXMuX2N1ZSk7XG4gICAgdGhpcy5fY3VlID0gbnVsbDtcbiAgfVxuICBfcGFyc2VTdHlsZXModmFsdWVzKSB7XG4gICAgbGV0IG5hbWUgPSBcIkRlZmF1bHRcIiwgc3R5bGVzID0ge30sIG91dGxpbmVYLCBhbGlnbiA9IFwiY2VudGVyXCIsIHZlcnRpY2FsID0gXCJib3R0b21cIiwgbWFyZ2luViwgb3V0bGluZVkgPSAxLjIsIG91dGxpbmVDb2xvciwgYmdDb2xvciwgYm9yZGVyU3R5bGUgPSAzLCB0cmFuc2Zvcm0gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2Zvcm1hdC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZmllbGQgPSB0aGlzLl9mb3JtYXRbaV0sIHZhbHVlID0gdmFsdWVzW2ldO1xuICAgICAgc3dpdGNoIChmaWVsZCkge1xuICAgICAgICBjYXNlIFwiTmFtZVwiOlxuICAgICAgICAgIG5hbWUgPSB2YWx1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkZvbnRuYW1lXCI6XG4gICAgICAgICAgc3R5bGVzW1wiZm9udC1mYW1pbHlcIl0gPSB2YWx1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkZvbnRzaXplXCI6XG4gICAgICAgICAgc3R5bGVzW1wiZm9udC1zaXplXCJdID0gYGNhbGMoJHt2YWx1ZX0gLyB2YXIoLS1vdmVybGF5LWhlaWdodCkpYDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlByaW1hcnlDb2xvdXJcIjpcbiAgICAgICAgICBjb25zdCBjb2xvciA9IHBhcnNlQ29sb3IodmFsdWUpO1xuICAgICAgICAgIGlmIChjb2xvcilcbiAgICAgICAgICAgIHN0eWxlc1tcIi0tY3VlLWNvbG9yXCJdID0gY29sb3I7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJCb3JkZXJTdHlsZVwiOlxuICAgICAgICAgIGJvcmRlclN0eWxlID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkJhY2tDb2xvdXJcIjpcbiAgICAgICAgICBiZ0NvbG9yID0gcGFyc2VDb2xvcih2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJPdXRsaW5lQ29sb3VyXCI6XG4gICAgICAgICAgY29uc3QgX291dGxpbmVDb2xvciA9IHBhcnNlQ29sb3IodmFsdWUpO1xuICAgICAgICAgIGlmIChfb3V0bGluZUNvbG9yKVxuICAgICAgICAgICAgb3V0bGluZUNvbG9yID0gX291dGxpbmVDb2xvcjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkJvbGRcIjpcbiAgICAgICAgICBpZiAocGFyc2VJbnQodmFsdWUpKVxuICAgICAgICAgICAgc3R5bGVzW1wiZm9udC13ZWlnaHRcIl0gPSBcImJvbGRcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkl0YWxpY1wiOlxuICAgICAgICAgIGlmIChwYXJzZUludCh2YWx1ZSkpXG4gICAgICAgICAgICBzdHlsZXNbXCJmb250LXN0eWxlXCJdID0gXCJpdGFsaWNcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlVuZGVybGluZVwiOlxuICAgICAgICAgIGlmIChwYXJzZUludCh2YWx1ZSkpXG4gICAgICAgICAgICBzdHlsZXNbXCJ0ZXh0LWRlY29yYXRpb25cIl0gPSBcInVuZGVybGluZVwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiU3RyaWtlT3V0XCI6XG4gICAgICAgICAgaWYgKHBhcnNlSW50KHZhbHVlKSlcbiAgICAgICAgICAgIHN0eWxlc1tcInRleHQtZGVjb3JhdGlvblwiXSA9IFwibGluZS10aHJvdWdoXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJTcGFjaW5nXCI6XG4gICAgICAgICAgc3R5bGVzW1wibGV0dGVyLXNwYWNpbmdcIl0gPSB2YWx1ZSArIFwicHhcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFscGhhTGV2ZWxcIjpcbiAgICAgICAgICBzdHlsZXNbXCJvcGFjaXR5XCJdID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJTY2FsZVhcIjpcbiAgICAgICAgICB0cmFuc2Zvcm0ucHVzaChgc2NhbGVYKCR7cGFyc2VGbG9hdCh2YWx1ZSkgLyAxMDB9KWApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiU2NhbGVZXCI6XG4gICAgICAgICAgdHJhbnNmb3JtLnB1c2goYHNjYWxlWSgke3BhcnNlRmxvYXQodmFsdWUpIC8gMTAwfSlgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFuZ2xlXCI6XG4gICAgICAgICAgdHJhbnNmb3JtLnB1c2goYHJvdGF0ZSgke3ZhbHVlfWRlZylgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlNoYWRvd1wiOlxuICAgICAgICAgIG91dGxpbmVZID0gcGFyc2VJbnQodmFsdWUsIDEwKSAqIDEuMjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIk1hcmdpbkxcIjpcbiAgICAgICAgICBzdHlsZXNbXCItLWN1ZS13aWR0aFwiXSA9IFwiYXV0b1wiO1xuICAgICAgICAgIHN0eWxlc1tcIi0tY3VlLWxlZnRcIl0gPSBwYXJzZUZsb2F0KHZhbHVlKSArIFwicHhcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIk1hcmdpblJcIjpcbiAgICAgICAgICBzdHlsZXNbXCItLWN1ZS13aWR0aFwiXSA9IFwiYXV0b1wiO1xuICAgICAgICAgIHN0eWxlc1tcIi0tY3VlLXJpZ2h0XCJdID0gcGFyc2VGbG9hdCh2YWx1ZSkgKyBcInB4XCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJNYXJnaW5WXCI6XG4gICAgICAgICAgbWFyZ2luViA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiT3V0bGluZVwiOlxuICAgICAgICAgIG91dGxpbmVYID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFsaWdubWVudFwiOlxuICAgICAgICAgIGNvbnN0IGFsaWdubWVudCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgaWYgKGFsaWdubWVudCA+PSA0KVxuICAgICAgICAgICAgdmVydGljYWwgPSBhbGlnbm1lbnQgPj0gNyA/IFwidG9wXCIgOiBcImNlbnRlclwiO1xuICAgICAgICAgIHN3aXRjaCAoYWxpZ25tZW50ICUgMykge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICBhbGlnbiA9IFwic3RhcnRcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIGFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgIGFsaWduID0gXCJlbmRcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzdHlsZXMuX3ZlcnRpY2FsID0gdmVydGljYWw7XG4gICAgc3R5bGVzW1wiLS1jdWUtd2hpdGUtc3BhY2VcIl0gPSBcIm5vcm1hbFwiO1xuICAgIHN0eWxlc1tcIi0tY3VlLWxpbmUtaGVpZ2h0XCJdID0gXCJub3JtYWxcIjtcbiAgICBzdHlsZXNbXCItLWN1ZS10ZXh0LWFsaWduXCJdID0gYWxpZ247XG4gICAgaWYgKHZlcnRpY2FsID09PSBcImNlbnRlclwiKSB7XG4gICAgICBzdHlsZXNbYC0tY3VlLXRvcGBdID0gXCI1MCVcIjtcbiAgICAgIHRyYW5zZm9ybS5wdXNoKFwidHJhbnNsYXRlWSgtNTAlKVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzW2AtLWN1ZS0ke3ZlcnRpY2FsfWBdID0gKG1hcmdpblYgfHwgMCkgKyBcInB4XCI7XG4gICAgfVxuICAgIGlmIChib3JkZXJTdHlsZSA9PT0gMSkge1xuICAgICAgc3R5bGVzW1wiLS1jdWUtcGFkZGluZy15XCJdID0gXCIwXCI7XG4gICAgfVxuICAgIGlmIChib3JkZXJTdHlsZSA9PT0gMSB8fCBiZ0NvbG9yKSB7XG4gICAgICBzdHlsZXNbXCItLWN1ZS1iZy1jb2xvclwiXSA9IGJvcmRlclN0eWxlID09PSAxID8gXCJub25lXCIgOiBiZ0NvbG9yO1xuICAgIH1cbiAgICBpZiAoYm9yZGVyU3R5bGUgPT09IDMgJiYgb3V0bGluZUNvbG9yKSB7XG4gICAgICBzdHlsZXNbXCItLWN1ZS1vdXRsaW5lXCJdID0gYCR7b3V0bGluZVh9cHggc29saWQgJHtvdXRsaW5lQ29sb3J9YDtcbiAgICB9XG4gICAgaWYgKGJvcmRlclN0eWxlID09PSAxICYmIHR5cGVvZiBvdXRsaW5lWCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgY29uc3QgY29sb3IgPSBiZ0NvbG9yID8/IFwiIzAwMFwiO1xuICAgICAgc3R5bGVzW1wiLS1jdWUtdGV4dC1zaGFkb3dcIl0gPSBbXG4gICAgICAgIG91dGxpbmVDb2xvciAmJiBidWlsZFRleHRTaGFkb3cob3V0bGluZVggKiAxLjIsIG91dGxpbmVZICogMS4yLCBvdXRsaW5lQ29sb3IpLFxuICAgICAgICBvdXRsaW5lQ29sb3IgPyBidWlsZFRleHRTaGFkb3cob3V0bGluZVggKiAob3V0bGluZVggLyAyKSwgb3V0bGluZVkgKiAob3V0bGluZVggLyAyKSwgY29sb3IpIDogYnVpbGRUZXh0U2hhZG93KG91dGxpbmVYLCBvdXRsaW5lWSwgY29sb3IpXG4gICAgICBdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiLCBcIik7XG4gICAgfVxuICAgIGlmICh0cmFuc2Zvcm0ubGVuZ3RoKVxuICAgICAgc3R5bGVzW1wiLS1jdWUtdHJhbnNmb3JtXCJdID0gdHJhbnNmb3JtLmpvaW4oXCIgXCIpO1xuICAgIHRoaXMuX3N0eWxlc1tuYW1lXSA9IHN0eWxlcztcbiAgfVxuICBfcGFyc2VEaWFsb2d1ZSh2YWx1ZXMsIGxpbmVDb3VudCkge1xuICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMuX2J1aWxkRmllbGRzKHZhbHVlcyk7XG4gICAgY29uc3QgdGltZXN0YW1wID0gdGhpcy5fcGFyc2VUaW1lc3RhbXAoZmllbGRzLlN0YXJ0LCBmaWVsZHMuRW5kLCBsaW5lQ291bnQpO1xuICAgIGlmICghdGltZXN0YW1wKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGN1ZSA9IG5ldyBWVFRDdWUodGltZXN0YW1wWzBdLCB0aW1lc3RhbXBbMV0sIFwiXCIpLCBzdHlsZXMgPSB7IC4uLnRoaXMuX3N0eWxlc1tmaWVsZHMuU3R5bGVdIHx8IHt9IH0sIHZvaWNlID0gZmllbGRzLk5hbWUgPyBgPHYgJHtmaWVsZHMuTmFtZX0+YCA6IFwiXCI7XG4gICAgY29uc3QgdmVydGljYWwgPSBzdHlsZXMuX3ZlcnRpY2FsLCBtYXJnaW5MZWZ0ID0gZmllbGRzLk1hcmdpbkwgJiYgcGFyc2VGbG9hdChmaWVsZHMuTWFyZ2luTCksIG1hcmdpblJpZ2h0ID0gZmllbGRzLk1hcmdpblIgJiYgcGFyc2VGbG9hdChmaWVsZHMuTWFyZ2luUiksIG1hcmdpblYgPSBmaWVsZHMuTWFyZ2luViAmJiBwYXJzZUZsb2F0KGZpZWxkcy5NYXJnaW5WKTtcbiAgICBpZiAobWFyZ2luTGVmdCkge1xuICAgICAgc3R5bGVzW1wiLS1jdWUtd2lkdGhcIl0gPSBcImF1dG9cIjtcbiAgICAgIHN0eWxlc1tcIi0tY3VlLWxlZnRcIl0gPSBtYXJnaW5MZWZ0ICsgXCJweFwiO1xuICAgIH1cbiAgICBpZiAobWFyZ2luUmlnaHQpIHtcbiAgICAgIHN0eWxlc1tcIi0tY3VlLXdpZHRoXCJdID0gXCJhdXRvXCI7XG4gICAgICBzdHlsZXNbXCItLWN1ZS1yaWdodFwiXSA9IG1hcmdpblJpZ2h0ICsgXCJweFwiO1xuICAgIH1cbiAgICBpZiAobWFyZ2luViAmJiB2ZXJ0aWNhbCAhPT0gXCJjZW50ZXJcIikge1xuICAgICAgc3R5bGVzW2AtLWN1ZS0ke3ZlcnRpY2FsfWBdID0gbWFyZ2luViArIFwicHhcIjtcbiAgICB9XG4gICAgY3VlLnRleHQgPSB2b2ljZSArIHZhbHVlcy5zbGljZSh0aGlzLl9mb3JtYXQubGVuZ3RoIC0gMSkuam9pbihcIiwgXCIpLnJlcGxhY2UoU1RZTEVfRlVOQ1RJT05fUkUsIFwiXCIpLnJlcGxhY2UoTkVXX0xJTkVfUkUsIFwiXFxuXCIpO1xuICAgIGRlbGV0ZSBzdHlsZXMuX3ZlcnRpY2FsO1xuICAgIGlmIChPYmplY3Qua2V5cyhzdHlsZXMpLmxlbmd0aClcbiAgICAgIGN1ZS5zdHlsZSA9IHN0eWxlcztcbiAgICByZXR1cm4gY3VlO1xuICB9XG4gIF9idWlsZEZpZWxkcyh2YWx1ZXMpIHtcbiAgICBjb25zdCBmaWVsZHMgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2Zvcm1hdC5sZW5ndGg7IGkrKykge1xuICAgICAgZmllbGRzW3RoaXMuX2Zvcm1hdFtpXV0gPSB2YWx1ZXNbaV07XG4gICAgfVxuICAgIHJldHVybiBmaWVsZHM7XG4gIH1cbiAgX3BhcnNlVGltZXN0YW1wKHN0YXJ0VGltZVRleHQsIGVuZFRpbWVUZXh0LCBsaW5lQ291bnQpIHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZVZUVFRpbWVzdGFtcChzdGFydFRpbWVUZXh0KSwgZW5kVGltZSA9IHBhcnNlVlRUVGltZXN0YW1wKGVuZFRpbWVUZXh0KTtcbiAgICBpZiAoc3RhcnRUaW1lICE9PSBudWxsICYmIGVuZFRpbWUgIT09IG51bGwgJiYgZW5kVGltZSA+IHN0YXJ0VGltZSkge1xuICAgICAgcmV0dXJuIFtzdGFydFRpbWUsIGVuZFRpbWVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc3RhcnRUaW1lID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVycm9yKHRoaXMuX2Vycm9yQnVpbGRlcj8uX2JhZFN0YXJ0VGltZXN0YW1wKHN0YXJ0VGltZVRleHQsIGxpbmVDb3VudCkpO1xuICAgICAgfVxuICAgICAgaWYgKGVuZFRpbWUgPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlRXJyb3IodGhpcy5fZXJyb3JCdWlsZGVyPy5fYmFkRW5kVGltZXN0YW1wKGVuZFRpbWVUZXh0LCBsaW5lQ291bnQpKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGFydFRpbWUgIT0gbnVsbCAmJiBlbmRUaW1lICE9PSBudWxsICYmIGVuZFRpbWUgPiBzdGFydFRpbWUpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlRXJyb3IodGhpcy5fZXJyb3JCdWlsZGVyPy5fYmFkUmFuZ2VUaW1lc3RhbXAoc3RhcnRUaW1lLCBlbmRUaW1lLCBsaW5lQ291bnQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX2hhbmRsZUVycm9yKGVycm9yKSB7XG4gICAgaWYgKCFlcnJvcilcbiAgICAgIHJldHVybjtcbiAgICB0aGlzLl9lcnJvcnMucHVzaChlcnJvcik7XG4gICAgaWYgKHRoaXMuX2luaXQuc3RyaWN0KSB7XG4gICAgICB0aGlzLl9pbml0LmNhbmNlbCgpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2luaXQub25FcnJvcj8uKGVycm9yKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHBhcnNlQ29sb3IoY29sb3IpIHtcbiAgY29uc3QgYWJnciA9IHBhcnNlSW50KGNvbG9yLnJlcGxhY2UoXCImSFwiLCBcIlwiKSwgMTYpO1xuICBpZiAoYWJnciA+PSAwKSB7XG4gICAgY29uc3QgYSA9IGFiZ3IgPj4gMjQgJiAyNTUgXiAyNTU7XG4gICAgY29uc3QgYWxwaGEgPSBhIC8gMjU1O1xuICAgIGNvbnN0IGIgPSBhYmdyID4+IDE2ICYgMjU1O1xuICAgIGNvbnN0IGcgPSBhYmdyID4+IDggJiAyNTU7XG4gICAgY29uc3QgciA9IGFiZ3IgJiAyNTU7XG4gICAgcmV0dXJuIFwicmdiYShcIiArIFtyLCBnLCBiLCBhbHBoYV0uam9pbihcIixcIikgKyBcIilcIjtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGJ1aWxkVGV4dFNoYWRvdyh4LCB5LCBjb2xvcikge1xuICBjb25zdCBub09mU2hhZG93cyA9IE1hdGguY2VpbCgyICogTWF0aC5QSSAqIHgpO1xuICBsZXQgdGV4dFNoYWRvdyA9IFwiXCI7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbm9PZlNoYWRvd3M7IGkrKykge1xuICAgIGNvbnN0IHRoZXRhID0gMiAqIE1hdGguUEkgKiBpIC8gbm9PZlNoYWRvd3M7XG4gICAgdGV4dFNoYWRvdyArPSB4ICogTWF0aC5jb3ModGhldGEpICsgXCJweCBcIiArIHkgKiBNYXRoLnNpbih0aGV0YSkgKyBcInB4IDAgXCIgKyBjb2xvciArIChpID09IG5vT2ZTaGFkb3dzIC0gMSA/IFwiXCIgOiBcIixcIik7XG4gIH1cbiAgcmV0dXJuIHRleHRTaGFkb3c7XG59XG5mdW5jdGlvbiBjcmVhdGVTU0FQYXJzZXIoKSB7XG4gIHJldHVybiBuZXcgU1NBUGFyc2VyKCk7XG59XG5cbmV4cG9ydCB7IFNTQVBhcnNlciwgY3JlYXRlU1NBUGFyc2VyIGFzIGRlZmF1bHQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/media-captions/dist/dev/ssa-parser.js\n"));

/***/ })

}]);